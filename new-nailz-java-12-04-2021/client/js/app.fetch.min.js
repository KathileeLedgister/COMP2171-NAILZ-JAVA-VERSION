var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];if(!(f in c))return;c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var f=a.split(".");a=1===f.length;d=f[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<f.length-1;e++){var g=f[e];if(!(g in d))return;d=d[g]}f=f[f.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[f]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[f]&&($jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(f):
$jscomp.POLYFILL_PREFIX+f),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[f],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};
$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(a){this.abruptCompletion_={"return":a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};
$jscomp.generator.Context.prototype.yieldAll=function(a,b){var c=$jscomp.makeIterator(a),d=c.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=c,this.yield(d.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){var c=this.finallyContexts_.splice(b||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_["return"]);this.context_["return"](a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var f=d.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a["return"],done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this["throw"]=function(b){return a.throw_(b)};this["return"]=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){var c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(c,a.prototype);return c};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a["throw"](d)}return new Promise(function(d,f){function e(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(e,f)}e(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
var _use_css_definitions=!1,_bshutDown=!1,_b_sequence=!1,_app_f_btn_set="",_pw_handler="",_userid="",_usersession=-1,_userlevel=0,_f_vTys=[0],_f_vTxs=[0],_f_eTs=[0],_f_dXTs=[0],_f_dYTs=[0],_f_t_c_back="",_b_tc=!1,_f_pre_submit=function(a,b){return Promise.reject()},_f_post_submit=function(a,b){return Promise.reject()},_f_set_pw=function(){$(document).on("click",_app_f_btn_set,function(){_g_errorModal&&$(_g_errorModal).toast("hide");"function"===typeof _pw_handler&&_pw_handler();return!1});_app_f_btn_set=
""},_f_submit=function(a,b){var c=document.getElementById("main-form");return(new Promise(function(d,f){$(c).removeClass("was-validated");!1===c.checkValidity()?($(c).addClass("was-validated"),f(Error("FORM_INVALID:"))):($(c).addClass("was-validated"),d())})).then(function(){var d=new FormData(c),f=$("#"+a).attr("pg_url"),e="undefined"!==typeof $("#"+a).attr("pg_get"),g=$("#"+a).attr("pg_data");g||(g="");d.append("_app_submitter",$("#"+a).attr("id"));d.has("userid")||d.append("userid",_userid);d.append("session",
b.session?b.session:_usersession);d.append("level",_userlevel);d.append("uuid",__uuid);var h="",k="";e||(h=new URLSearchParams(g));d=$jscomp.makeIterator(d.entries());for(k=d.next();!k.done;k=d.next())k=k.value,e?h+="&"+encodeURIComponent(k[0])+"="+encodeURIComponent(k[1]):h.append(k[0],k[1]);e?(e=new Headers,e.append("Accept","text/plain;text/html;application/json"),h=h.replace(/%20/g,"+"),k=new Request(f+"?"+h.substr(1)+(g?"&"+g:""),{method:"GET",mode:"same-origin",cache:"no-cache",headers:e,credentials:"same-origin",
redirect:"error",referrerPolicy:"no-referrer"})):k=new Request(f,{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",redirect:"error",referrerPolicy:"no-referrer",body:h});return fetch(k).then(function(l){if(!l.ok)throw Error("REQUEST ERROR: Unable to process your request");var m=l.headers.get("content-type");if(!m||!m.includes("application/json"))throw new TypeError("MALFORMED RESPONSE: Oops, we haven't got the correct format!");return(m=$("#"+a).attr("pg_url_next"))?_f_goload("undefined",
{pg_url:m}).then(function(){return Promise.resolve(l.json())}):Promise.resolve(l.json())})["catch"](function(l){showErrorModal(l.message);return Promise.reject(l)})})};
_submit_handler=function(a,b){if(!_b_sequence){_b_sequence=!0;var c=document.getElementById("main-form");return c?(new Promise(function(d,f){_f_pre_submit(a,b).then(function(){d()})["catch"](function(e){f(e)})})).then(function(){c.requestSubmit();return _f_submit(a,b).then(function(d){b.rpJson=d;return _f_post_submit(a,b)["finally"](function(){_b_sequence=!1})})["catch"](function(){_b_sequence=!1})})["catch"](function(d){_b_sequence=!1;return Promise.reject(d)}):(_b_sequence=!1,Promise.reject())}};
var _f_goload=function(a,b){var c=$("#"+a).attr("pg_url");if(!c){if("string"!==typeof b.pg_url)return showErrorModal("URLNOTFOUND: Unable to process request"),Promise.reject(Error("URLNOTFOUND: Unable to process request"));c=b.pg_url}var d=$("#"+a).attr("allow_scripts"),f=new Headers;f.append("Content-Type","text/plain;text/html");f.append("Accept","text/html");c=new Request(c,{method:"GET",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:f,redirect:"error",referrerPolicy:"no-referrer"});
return fetch(c).then(function(e){if(!e.ok)throw Error("REQUEST ERROR: Unable to process your request");var g=e.headers.get("content-type");if(!g||!g.includes("text/html"))throw new TypeError("MALFORMED RESPONSE: Oops, we haven't got the correct format!");return e.text()}).then(function(e){try{var g=!1,h=e;if(!_bshutDown&&null===e)h="Unknown Error";else if(_bshutDown||"string"!==typeof e||"Error:"!==e.substr(0,6))if(_bshutDown||"undefined"!==typeof e[1])g=!0,h=e;if(g){e=-1;if(-1===(e=h.indexOf("<body "))&&
-1===(e=h.indexOf("<BODY ")))throw Error("MALFORMED HTML: <body tag not found in the page ... Developer Error.");h=h.substr(e+6);if(-1===(e=h.indexOf(">")))throw Error("MALFORMED HTML: Body tag closing > expected ... Developer Error.");h=h.substr(e+1);if(-1===(e=h.lastIndexOf("</body"))&&-1===(e=h.lastIndexOf("</BODY")))throw Error("MALFORMED HTML: </body tag not found in the page ... Developer Error.");h=h.substr(0,e);try{return $("#page-content").empty(),d||(h=h.replace(/<script[ ]/gi,"<noscript ").replace(/<\/script[ ]/gi,
"</noscript ")),$("#page-content").prepend(h),d||($("#page-content noscript").addClass("suppressed-script"),_use_css_definitions||$("#page-content noscript").css({display:"none"})),_app_f_btn_set&&_f_set_pw(),Promise.resolve()}catch(k){throw $("#page-content").prepend("UNKNOWN ERROR: Error Processing Page"),Error("UNKNOWN ERROR: Error Processing Page");}}else throw Error("FEATURE NOT AVAILABLE: Error Processing Page");}catch(k){throw Error("UNKNOWN ERROR:");}})["catch"](function(e){showErrorModal(e.message);
return Promise.reject(e)})},_f_gofetch=function(a,b){return(new Promise(function(c,d){c()})).then(function(){var c=$("#"+a).attr("id"),d=c;if(!d){if("string"!==typeof b.pg_url||!b.pg_url)throw Error("URLNOTFOUND: Request NOT supported");d=b.pg_url}var f=$("#"+a).attr("pg_data");f||(f="");f=new URLSearchParams(f);f.append("_app_submitter",c?c:"string"===typeof b.pg_id?b.pg_id:"none");f.has("userid")||f.append("userid",_userid);f.append("session",b.session?b.session:_usersession);f.append("level",_userlevel);
f.append("uuid",__uuid);"undefined"!==typeof b.direct&&f.append("direct",b.direct);var e=c="";f=$jscomp.makeIterator(f.entries());for(e=f.next();!e.done;e=f.next())e=e.value,c+="&"+encodeURIComponent(e[0])+"="+encodeURIComponent(e[1]);f=new Headers;f.append("Accept","application/json");c=c.replace(/%20/g,"+");e=new Request(d+c.substr(d.endsWith("?")?1:0),{method:"GET",mode:"same-origin",cache:"no-cache",headers:f,credentials:"same-origin",redirect:"error",referrerPolicy:"no-referrer"});return fetch(e).then(function(g){if(!g.ok)throw Error("REQUEST ERROR: Unable to process your request");
var h=g.headers.get("content-type");if(!h||!h.includes("application/json"))throw new TypeError("MALFORMED RESPONSE: Oops, we haven't got the correct format!");return Promise.resolve(g.json())})["catch"](function(g){showErrorModal(g.message);return Promise.reject(g)})})};function _set_TC_back(a){a&&!_f_t_c_back&&(window.addEventListener("touchstart",handleStart,{passive:!1}),window.addEventListener("touchmove",handleMove,{passive:!1}),_f_t_c_back=a)}
function _reset_TC_back(a){setTimeout(function(){_set_TC_back(a)},250)}function _clear_TC_back(){_f_t_c_back&&(window.removeEventListener("touchstart",handleStart,{passive:!1}),window.removeEventListener("touchmove",handleMove,{passive:!1}),_f_t_c_back="")}function handleStart(a){_f_t_c_back&&(a=a.changedTouches,_f_vTxs[0]=0,_f_vTys[0]=0,_f_eTs[0]=Date.now(),_f_dXTs[0]=a[0].pageX,_f_dYTs[0]=a[0].pageY)}
function handleMove(a){if(_f_t_c_back){a=a.changedTouches;var b=Date.now();if(0<b-_f_eTs[0]){var c=a[0].pageX-_f_dXTs[0];var d=a[0].pageY-_f_dYTs[0];c/=b-_f_eTs[0];d/=b-_f_eTs[0];_f_vTxs[0]=(20*_f_vTxs[0]+c)/21;_f_vTys[0]=(20*_f_vTys[0]+d)/21;_f_eTs[0]=b;_f_dXTs[0]=a[0].pageX;_f_dYTs[0]=a[0].pageY;if(!_b_tc){_b_tc=!0;var f=_f_vTxs[0],e=_f_vTys[0];setTimeout(function(){_f_t_c_back(f,e);_b_tc=!1},2)}}}}
function urlBase64ToUint8Array(a){var b="=".repeat((4-a.length%4)%4);a=(a+b).replace(/\-/g,"+").replace(/_/g,"/");a=window.atob(a);b=new Uint8Array(a.length);for(var c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}
function push_subscribe(a){navigator.serviceWorker.ready.then(function(b){var c,d,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(fetch("api/vapidPublicKey",{method:"GET"}),2);if(3!=e.nextAddress)return c=e.yieldResult,e.yield(c.text(),3);d=e.yieldResult;f=urlBase64ToUint8Array(d);return e["return"](b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:f})["catch"](function(g){showErrorModal("WARNING: Subscription Registration Failed<br>"+
g.message)}))})}).then(function(b){console.log("Subscribed",b.endpoint);return fetch("api/register",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:b,options:a})})}).then(setUnsubscribeButton)}
function push_unsubscribe(a){navigator.serviceWorker.ready.then(function(b){return b.pushManager.getSubscription()}).then(function(b){return b.unsubscribe().then(function(){console.log("Unsubscribed",b.endpoint);return fetch("api/unregister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:b,options:a})})})}).then(setSubscribeButton)};